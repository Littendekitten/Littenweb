<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>KittyCoins Login/Register</title>
<link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300..700&display=swap" rel="stylesheet">
<style>
body{font-family:'Comfortaa',sans-serif; background:linear-gradient(135deg,#307cff,#e254ff); display:flex; justify-content:center; align-items:center; min-height:100vh; margin:0;}
.container{background:#fff; padding:30px; border-radius:20px; text-align:center; box-shadow:0 10px 30px rgba(0,0,0,0.25);}
input{padding:10px; margin:6px; border-radius:8px; border:1px solid #ddd; width:220px; text-align:center;}
button{padding:12px 20px; margin-top:10px; background:linear-gradient(90deg,#307cff,#e254ff); color:#fff; border:none; border-radius:10px; font-weight:700; cursor:pointer;}
#message{margin-top:12px;}
</style>
</head>
<body>
<div class="container">
<h1>KittyCoins Login / Register</h1>
<input type="email" id="loginEmail" placeholder="Email"><br>
<input type="password" id="loginPassword" placeholder="Password"><br>
<button id="loginBtn">Login</button><br>
<button id="registerBtn">Register New Account</button>
<div id="message"></div>
</div>

<script src="datasave.js"></script>
<script>
const msg = document.getElementById("message");

// Login
document.getElementById("loginBtn").addEventListener("click", ()=>{
  const email = document.getElementById("loginEmail").value.trim();
  const pass = document.getElementById("loginPassword").value;
  const res = loginUser(email, pass);
  if(!res.success){ msg.style.color="red"; msg.innerText=res.error; return; }
  window.location.href="trade.html";
});

// Register
document.getElementById("registerBtn").addEventListener("click", ()=>{
  const email = document.getElementById("loginEmail").value.trim();
  const pass = document.getElementById("loginPassword").value;

  if(!email || !pass){ msg.style.color="red"; msg.innerText="Enter a valid email and password."; return; }

  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if(!emailRegex.test(email)){ msg.style.color="red"; msg.innerText="Enter a valid email address."; return; }

  if(usersData[email]){ msg.style.color="red"; msg.innerText="Account already exists!"; return; }

  usersData[email] = { password: pass, balance: 0 };
  localStorage.setItem("balance_" + email, 0);
  msg.style.color="green";
  msg.innerText="Account registered! You can now login.";
});
</script>
</body>
</html>
